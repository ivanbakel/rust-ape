@title A basic lookahead

@code_type rust .rs

--- basic_lookahead.rs
// run-pass
#![feature(proc_macro_hygiene)]
extern crate ape;
extern crate ape_runtime;

use ape::arb_peg;
use ape_runtime::Pattern;

extern crate matches;

use matches::matches; 

fn main() {
  let pattern = arb_peg!{->'a' : char -> ()};

  let mut sequence = vec!['a', 'b', 'c'].into_iter();
  let mut feed = ape_runtime::CopyParseState::from(sequence);

  assert!(pattern.pmatch(&mut feed).is_ok());
  matches!(feed.next(), Some(a));
  assert!(pattern.pmatch(&mut feed).is_err());
}
---
